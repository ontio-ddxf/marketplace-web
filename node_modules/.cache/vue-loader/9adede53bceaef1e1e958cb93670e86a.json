{"remainingRequest":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Commoditylist.vue?vue&type=style&index=0&id=bc28606a&lang=less&scoped=true&","dependencies":[{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Commoditylist.vue","mtime":1557385220457},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/less-loader/dist/cjs.js","mtime":1557048975529},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.commodity_box {\n  .search_box {\n    padding: 0 10%;\n    max-width: 40%;\n    margin: 0 auto;\n  }\n  .list_box {\n    margin: 0 auto;\n    width: 80%;\n  }\n  .list_box,\n  .paginatio {\n    margin-top: 40px;\n  }\n}\n",{"version":3,"sources":["Commoditylist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Commoditylist.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"commodity_box\">\n    <div class=\"search_box\">\n      <el-input placeholder=\"请输入内容\" v-model=\"searchText\" class=\"input-with-select\">\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getSearch()\"></el-button>\n      </el-input>\n    </div>\n    <div class=\"list_box\">\n      <el-table :data=\"tableData\" border style=\"width: 100%\">\n        <el-table-column type=\"index\" align=\"center\" width=\"50\" :index=\"indexMethod\"></el-table-column>\n        <el-table-column prop=\"tag0\" align=\"center\" label=\"标签\">\n          <template slot-scope=\"scope\">\n            <el-tag\n              style=\"margin-right: 10px;\"\n              v-for=\"(item, idx) in scope.row.tagValue\"\n              :key=\"idx\"\n            >{{item}}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"coin\" align=\"center\" label=\"币种\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"price\" align=\"center\" label=\"价格\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"createTime\" align=\"center\" label=\"日期\" width=\"200\"></el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"handleClick(scope.row)\" type=\"text\" size=\"small\">进入详情</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"paginatio\">\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        background\n        layout=\"prev, pager, next\"\n        :total=\"recordCount\"\n        :page-size=\"pageSize\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      recordCount: 0,\n      searchText: '',\n      tableData: [],\n      pageSize: 4,\n      currentPage: 0\n    }\n  },\n  methods: {\n    handleClick(row) {\n      this.$router.push({ path: 'commoditydetail', query: { commodityId: row.id } });\n    },\n    async getSearch(pageIndex = 0) {\n      let params = {\n        pageIndex,\n        pageSize: this.pageSize,\n        queryParams: [\n          {\n            percent: 100,\n            text: this.searchText\n          }\n        ]\n      }\n      try {\n        let res = await this.$http.post(`http://192.168.50.96:8182/api/v1/dataset`, params)\n        console.log(res)\n\n        if (res.status === 200 && res.data.msg === 'SUCCESS') {\n          this.tableData = res.data.result.recordList\n          this.recordCount = res.data.result.recordCount\n        } else {\n          this.tableData = []\n        }\n      } catch (error) {\n        this.tableData = []\n      }\n    },\n    handleCurrentChange(val) {\n      this.getSearch(val - 1)\n      this.currentPage = val - 1\n    },\n    indexMethod(index) {\n      return this.currentPage * this.pageSize + index + 1;\n    }\n  },\n  mounted() {\n    this.getSearch()\n  },\n}\n</script>\n\n<style lang='less' scoped>\n.commodity_box {\n  .search_box {\n    padding: 0 10%;\n    max-width: 40%;\n    margin: 0 auto;\n  }\n  .list_box {\n    margin: 0 auto;\n    width: 80%;\n  }\n  .list_box,\n  .paginatio {\n    margin-top: 40px;\n  }\n}\n</style>\n"]}]}