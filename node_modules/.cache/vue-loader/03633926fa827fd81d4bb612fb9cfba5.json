{"remainingRequest":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Theheader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Theheader.vue","mtime":1557132096929},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { client } from 'ontology-dapi';\nexport default {\n  data() {\n    return {\n      userAccount: '',\n      logining: false\n    }\n  },\n  created() {\n    this.userAccount = sessionStorage.getItem('user_ontid')\n  },\n  methods: {\n    LoginOut() {\n      this.$confirm('确定退出当前登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {//确定\n        sessionStorage.removeItem(\"user_ontid\");\n        sessionStorage.removeItem(\"access_token\");\n        this.userAccount = '';\n        this.$router.push({ path: '/' });\n      }).catch(() => {\n\n      });\n    },\n    async getIdenty() {\n      try {\n        this.logining = true\n        let res = await client.api.identity.getIdentity()\n        sessionStorage.setItem(\"user_ontid\", res)\n        this.userAccount = res\n        this.logining = false\n        this.$message({\n          message: '登陆成功',\n          type: 'success',\n          center: true,\n          duration: 2000\n        });\n        this.$router.push({ path: '/' });\n      } catch (error) {\n        this.$message({\n          message: '登陆失败，请重试！',\n          type: 'error',\n          center: true,\n          duration: 2000\n        });\n        this.logining = false\n      }\n    },\n    toOrder() {\n      this.$router.push({ path: 'ordercenter' });\n    }\n  },\n}\n",{"version":3,"sources":["Theheader.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Theheader.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"header_layout\">\n    <el-button round size=\"small\" v-show=\"userAccount\" @click=\"toOrder()\">订单中心</el-button>\n    <el-button round size=\"small\" v-if=\"userAccount\" @click=\"LoginOut()\">退出</el-button>\n    <el-button round size=\"small\" :disabled=\"logining\" v-else @click=\"getIdenty()\">登陆</el-button>\n    <span class=\"userAccount\">{{userAccount}}</span>\n  </div>\n</template>\n\n<script>\nimport { client } from 'ontology-dapi';\nexport default {\n  data() {\n    return {\n      userAccount: '',\n      logining: false\n    }\n  },\n  created() {\n    this.userAccount = sessionStorage.getItem('user_ontid')\n  },\n  methods: {\n    LoginOut() {\n      this.$confirm('确定退出当前登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {//确定\n        sessionStorage.removeItem(\"user_ontid\");\n        sessionStorage.removeItem(\"access_token\");\n        this.userAccount = '';\n        this.$router.push({ path: '/' });\n      }).catch(() => {\n\n      });\n    },\n    async getIdenty() {\n      try {\n        this.logining = true\n        let res = await client.api.identity.getIdentity()\n        sessionStorage.setItem(\"user_ontid\", res)\n        this.userAccount = res\n        this.logining = false\n        this.$message({\n          message: '登陆成功',\n          type: 'success',\n          center: true,\n          duration: 2000\n        });\n        this.$router.push({ path: '/' });\n      } catch (error) {\n        this.$message({\n          message: '登陆失败，请重试！',\n          type: 'error',\n          center: true,\n          duration: 2000\n        });\n        this.logining = false\n      }\n    },\n    toOrder() {\n      this.$router.push({ path: 'ordercenter' });\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.header_layout {\n  button.el-button {\n    background: #000;\n    color: #fff;\n    float: right;\n    margin-right: 20px;\n    margin: 14px;\n  }\n\n  span.userAccount {\n    display: block;\n    float: right;\n    margin-right: 40px;\n    height: 60px;\n    line-height: 60px;\n  }\n}\n</style>\n"]}]}