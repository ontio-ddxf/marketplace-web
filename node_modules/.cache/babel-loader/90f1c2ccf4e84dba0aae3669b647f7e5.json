{"remainingRequest":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/babel-loader/lib/index.js!/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Theheader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/src/components/Theheader.vue","mtime":1557455099631},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/ericyang/Desktop/Onchina_item/marketplace-web/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { client } from 'ontology-dapi';\nexport default {\n  data: function data() {\n    return {\n      userAccount: '',\n      logining: false\n    };\n  },\n  created: function created() {\n    this.userAccount = sessionStorage.getItem('user_ontid');\n  },\n  methods: {\n    LoginOut: function LoginOut() {\n      var _this = this;\n\n      this.$confirm('确定退出当前登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        //确定\n        sessionStorage.removeItem(\"user_ontid\");\n        sessionStorage.removeItem(\"access_token\");\n        _this.userAccount = '';\n\n        _this.$router.push({\n          path: '/'\n        });\n      }).catch(function () {});\n    },\n    getIdenty: function () {\n      var _getIdenty = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.logining = true;\n                _context.next = 4;\n                return client.api.identity.getIdentity();\n\n              case 4:\n                res = _context.sent;\n                sessionStorage.setItem(\"user_ontid\", res);\n                this.userAccount = res;\n                this.logining = false;\n                this.$message({\n                  message: '登陆成功',\n                  type: 'success',\n                  center: true,\n                  duration: 2000\n                });\n                this.$router.push({\n                  path: '/'\n                });\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                this.$message({\n                  message: '登陆失败，请重试！',\n                  type: 'error',\n                  center: true,\n                  duration: 2000\n                });\n                this.logining = false;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function getIdenty() {\n        return _getIdenty.apply(this, arguments);\n      }\n\n      return getIdenty;\n    }(),\n    toOrder: function toOrder() {\n      this.$router.push({\n        path: 'ordercenter'\n      });\n    }\n  }\n};",{"version":3,"sources":["Theheader.vue"],"names":[],"mappings":";;;;;;;;;;;AAUA,SAAA,MAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAPA,qBAOA;AACA,SAAA,WAAA,GAAA,cAAA,CAAA,OAAA,CAAA,YAAA,CAAA;AACA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,QAAA,CAAA,YAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AAAA;AACA,QAAA,cAAA,CAAA,UAAA,CAAA,YAAA;AACA,QAAA,cAAA,CAAA,UAAA,CAAA,cAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,EAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OATA,EASA,KATA,CASA,YAAA,CAEA,CAXA;AAYA,KAdA;AAeA,IAAA,SAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,qBAAA,QAAA,GAAA,IAAA;AAjBA;AAAA,uBAkBA,MAAA,CAAA,GAAA,CAAA,QAAA,CAAA,WAAA,EAlBA;;AAAA;AAkBA,gBAAA,GAlBA;AAmBA,gBAAA,cAAA,CAAA,OAAA,CAAA,YAAA,EAAA,GAAA;AACA,qBAAA,WAAA,GAAA,GAAA;AACA,qBAAA,QAAA,GAAA,KAAA;AACA,qBAAA,QAAA,CAAA;AACA,kBAAA,OAAA,EAAA,MADA;AAEA,kBAAA,IAAA,EAAA,SAFA;AAGA,kBAAA,MAAA,EAAA,IAHA;AAIA,kBAAA,QAAA,EAAA;AAJA,iBAAA;AAMA,qBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAAA;AA5BA;AAAA;;AAAA;AAAA;AAAA;AA8BA,qBAAA,QAAA,CAAA;AACA,kBAAA,OAAA,EAAA,WADA;AAEA,kBAAA,IAAA,EAAA,OAFA;AAGA,kBAAA,MAAA,EAAA,IAHA;AAIA,kBAAA,QAAA,EAAA;AAJA,iBAAA;AAMA,qBAAA,QAAA,GAAA,KAAA;;AApCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAuCA,IAAA,OAvCA,qBAuCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;AAzCA;AAVA,CAAA","sourcesContent":["<template>\n  <div class=\"header_layout\">\n    <el-button round size=\"small\" v-show=\"userAccount\" @click=\"toOrder()\">订单中心</el-button>\n    <el-button round size=\"small\" v-if=\"userAccount\" @click=\"LoginOut()\">退出</el-button>\n    <el-button round size=\"small\" :disabled=\"logining\" v-else @click=\"getIdenty()\">登陆</el-button>\n    <span class=\"userAccount\">{{userAccount}}</span>\n  </div>\n</template>\n\n<script>\nimport { client } from 'ontology-dapi';\nexport default {\n  data() {\n    return {\n      userAccount: '',\n      logining: false\n    }\n  },\n  created() {\n    this.userAccount = sessionStorage.getItem('user_ontid')\n  },\n  methods: {\n    LoginOut() {\n      this.$confirm('确定退出当前登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {//确定\n        sessionStorage.removeItem(\"user_ontid\");\n        sessionStorage.removeItem(\"access_token\");\n        this.userAccount = '';\n        this.$router.push({ path: '/' });\n      }).catch(() => {\n\n      });\n    },\n    async getIdenty() {\n      try {\n        this.logining = true\n        let res = await client.api.identity.getIdentity()\n        sessionStorage.setItem(\"user_ontid\", res)\n        this.userAccount = res\n        this.logining = false\n        this.$message({\n          message: '登陆成功',\n          type: 'success',\n          center: true,\n          duration: 2000\n        });\n        this.$router.push({ path: '/' });\n      } catch (error) {\n        this.$message({\n          message: '登陆失败，请重试！',\n          type: 'error',\n          center: true,\n          duration: 2000\n        });\n        this.logining = false\n      }\n    },\n    toOrder() {\n      this.$router.push({ path: 'ordercenter' });\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.header_layout {\n  overflow: hidden;\n  button.el-button {\n    background: #000;\n    color: #fff;\n    float: right;\n    margin-right: 20px;\n    margin: 14px;\n  }\n\n  span.userAccount {\n    display: block;\n    float: right;\n    margin-right: 40px;\n    height: 60px;\n    line-height: 60px;\n  }\n}\n</style>\n"],"sourceRoot":"src/components"}]}